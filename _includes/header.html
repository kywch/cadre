<nav class="navbar navbar-expand-lg fixed-top navbar-light py-4" id="menu">

  <!-- BRAND LOGO OR NAME -->
  <a class="navbar-brand top" id="site-logo" href="{{ '/' | relative_url }}">
    {% if site.navbar_img %}
      <img class="navbar-brand-img" src="{{ site.navbar_img | relative_url }}" alt="">
    {% elsif site.title %}
      {{ site.title }}
    {% else %}
      <img class="navbar-brand-img" src="{{ 'assets/images/Cadre.png' | relative_url }}" alt="">
    {% endif %}
  </a>
  
  <!-- NAVIGATION -->
  {% if site.data.navigation %}
    {% if page.url == "/" %}
      {% assign current = 'index.html' %}
    {% else %}
      {% assign url_list = page.url | split: "/" %}
      {% assign current = url_list[1] | strip %}
    {% endif %}
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    
    <div class="collapse navbar-collapse justify-content-end" id="navbarCollapse">
      <div class="navbar-nav">
      {% for item in site.data.navigation %}
        {% if item.link == current %}
          {% assign active_status = 'active' %}
        {% else %}
          {% assign active_status = '' %}
        {% endif %}
        <a class="nav-item nav-link {{ active_status }}" href="{{ item.link | relative_url }}">{{ item.name }}</a>
      {% endfor %}
      </div>
    </div>
  {% endif %}
  
</nav>

<!-- SEARCH -->
<div class="searchbar search-container sans">
    <i aria-hidden="true" class="fa fa-search"></i>
    <input autocomplete="off" id="search-input" oninput="changeResultContainerDisp(this.value)" placeholder="Search cards..." type="text"/>
    <label for="search-input"></label>
    <ul id="results-container"></ul>
</div>
<script src="{{ 'assets/js/simple-jekyll-search.min.js' | relative_url }}"></script>
<script>
    function changeResultContainerDisp(val) {
        if (val) {
            document.getElementById("results-container").style.display = "block";
            document.getElementById("search-input").addEventListener('blur', function () {
                document.addEventListener('click', function (event) {
                    var isClickInside = document.getElementById("results-container").contains(event
                        .target);
                    if (!isClickInside) {
                        document.getElementById("results-container").style.display = "none";
                    }
                })
            })
        } else {
            document.getElementById("results-container").style.display = "none";
        }
    }
    var sjs = SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        json: '{{ 'search.json' | relative_url }}',
        searchResultTemplate: '<li class="search_res" style="list-style: none;"><a href="{{ url | relative_url }}" color: #555555;"><p><strong>></strong> {title}</p></a></li>',
        noResultsText: 'No results found. Try another search.',
        fuzzy: false,
        limit: 5
    })
</script>
